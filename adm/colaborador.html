<header>
    <div class="containe-fluid">
        <div class="row">
            <div class="col-md-4">
                <h1 class="title">Colaboradores</h1>
            </div>
            <div class="col-md-3 offset-md-5">
                <button type="button" class="btn btn-dark trigger">Novo
                    Colaborador</button>
            </div>
        </div>
    </div>
    <hr>
</header>


<section>
    <div class="container">
        <table class="table table-hover" id="listagem-colaboradores">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Nome</th>
                    <th scope="col">E-mail</th>
                    <th scope="col">Profissão</th>
                    <th scope="col">Opções</th>
                </tr>
            </thead>
            <tbody>
                <tr id="colaborador-1">
                    <td scope="row">Enrique Gomes</td>
                    <td>enrique.gomes@fatec.sp.gov.br</td>
                    <td>Estagiário</td>
                    <td>
                        <i class="fas fa-edit editar-colaborador" data-id="1"></i>
                        <i class="fas fa-trash deletar-colaborador" data-id="1"></i>
                    </td>
                </tr>
                <tr id="colaborador-2">
                    <td scope="row">Lucas Medeiros</td>
                    <td>lucas.medeiros@fatec.sp.gov.br</td>
                    <td>Voluntário</td>
                    <td>
                        <i class="fas fa-edit editar-colaborador" data-id="2"></i>
                        <i class="fas fa-trash deletar-colaborador"></i>
                    </td>
                </tr>
                <tr id="colaborador-3">
                    <td scope="row">Gabriel Ferreira Campos</td>
                    <td>gabriel.campos@fatec.sp.gov.br</td>
                    <td>Psicólogo</td>
                    <td>
                        <i class="fas fa-edit editar-colaborador" data-id="3"></i>
                        <i class="fas fa-trash deletar-colaborador"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>


<!-- Modal Cadastrar Colaborador-->
<div id="modal">
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-10">
                <form method="POST" id="dadoscolaborador">

                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>Profissão</label>
                            <select class="form-control" id="cbbCargo" required>
                                <option value="" disabled selected>Selecione uma opção</option>
                                <option value="Psicólogo">Psicólogo</option>
                                <option value="Voluntário">Voluntário</option>
                                <option value="Estagiário">Estagiário</option>
                            </select>
                        </div>
                    </div>

                    <!--Email e Senha -->
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>Email</label>
                            <input name="txbEmail" id="txbEmail" type="email" class="form-control"
                                placeholder="Ex: joao.miguel@gmail.com">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <label>Senha</label>
                            <input name="txbSenha" id="txbSenha" type="password" class="form-control"
                                placeholder="********">
                        </div>
                    </div>

                    <!--Nome e Estado Civil -->
                    <div class="form-row">
                        <div class="form-group col-md-9">
                            <label>Nome Completo </label>
                            <input name="txbNome" id="txbNome" type="text" placeholder="Ex: João Miguel"
                                class="form-control">
                        </div>
                        <div class="form-group col-md-3">
                            <label>Estado Civil</label>
                            <select id="estadocivil" class="form-control">
                                <option value="" disabled selected>Selecione</option>
                                <option value="S">Solteiro</option>
                                <option value="Se">Separado</option>
                                <option value="C">Casado</option>
                                <option value="D">Divorciado</option>
                                <option value="V">Viúvo</option>
                            </select>
                        </div>
                    </div>
                    <!-- CPF -->
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>CPF</label>
                            <input name="txbCpf" id="txbCpf" type="text" class="form-control"
                                placeholder="Ex: 999.999.999-99" data-mask="000.000.000-00">
                        </div>
                    </div>
                    <!--CPF, Data de Nascimento e Telefone -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>Data de Nascimento</label>
                            <input name="nascimento" id="nascimento" type="date" class="form-control"
                                placeholder="Ex: 10/10/2020">
                        </div>
                        <div class="form-group col-md-7">
                            <label>Telefone</label>
                            <input name="telefone" id="telefone" type="text" class="form-control"
                                placeholder="Ex: (11) 99999-9999" data-mask="(00) 00000-0000">
                        </div>
                    </div>


                    <!-- Endereço -->
                    <div class="containe-fluid">
                        <div class="row">
                            <div class="col-md-4">
                                <br>
                                <h1 class="title">Endereço</h1>
                            </div>
                        </div>
                    </div>
                    <hr>

                    <!-- CEP -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>CEP<input name="cep" id="cep" type="text" class="form-control"
                                    placeholder="Ex: 08592-000" data-mask="00000-000" id="cep" value="" maxlength="9"
                                    onblur="pesquisacep(this.value);" /></label>
                        </div>
                    </div>


                    <!-- Logradouro, Número e complemento-->
                    <div class="form-row">

                        <div class="form-group col-md-6">
                            <label>Logradouro</label>
                            <input name="rua" id="rua" type="text" tabindex="1" class="form-control"
                                placeholder="Ex: Rua Londrina">
                        </div>
                        <div class="form-group col-md-2">
                            <label>Número</label>
                            <input name="numero" id="numero" tabindex="0" type="text" class="form-control"
                                placeholder="Ex: 57">
                        </div>
                        <div class="form-group col-md-4">
                            <label>Complemento</label>
                            <input name="complemento" id="complemento" type="text" class="form-control"
                                placeholder="Ex: bloco, apartamento">
                        </div>

                    </div>
                    <!-- Bairro, Cidade e Estado -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>Bairro</label>
                            <input name="bairro" id="bairro" type="text" class="form-control"
                                placeholder="Ex: Jardim Mirai">
                        </div>
                        <div class="form-group col-md-5">
                            <label>Cidade</label>
                            <input name="cidade" id="cidade" type="text" class="form-control"
                                placeholder="Ex: Itaquaquecetuba">
                        </div>
                        <div class="form-group col-md-2">
                            <label>Estado</label>
                            <input name="uf" id="uf" type="text" class="form-control" placeholder="Ex: SP">
                        </div>
                    </div>

                    <input class="salvar btn btn-primary" type="submit" name="btnSalvar" value="Salvar">

                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal Editar Colaborador-->

<div id="modal-editar">
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col-10">
                <form method="POST" id="editar-dadoscolaborador">

                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>Profissão</label>
                            <select class="form-control" id="editar-cbbCargo" required>
                                <option value="" disabled selected>Selecione uma opção</option>
                                <option value="Psicólogo">Psicólogo</option>
                                <option value="Voluntário">Voluntário</option>
                                <option value="Estagiário">Estagiário</option>
                            </select>
                        </div>
                    </div>

                    <!--Email e Senha -->
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>Email</label>
                            <input name="editar-txbEmail" id="editar-txbEmail" type="email" class="form-control"
                                placeholder="Ex: joao.miguel@gmail.com">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-8">
                            <label>Senha</label>
                            <input name="editar-txbSenha" id="editar-txbSenha" type="password" class="form-control"
                                placeholder="********">
                        </div>
                    </div>

                    <!--Nome e Estado Civil -->
                    <div class="form-row">
                        <div class="form-group col-md-9">
                            <label>Nome Completo </label>
                            <input name="editar-txbNome" id="editar-txbNome" type="text" placeholder="Ex: João Miguel"
                                class="form-control">
                        </div>
                        <div class="form-group col-md-3">
                            <label>Estado Civil</label>
                            <select id="editar-estadocivil" class="form-control">
                                <option value="" disabled selected>Selecione</option>
                                <option value="S">Solteiro</option>
                                <option value="Se">Separado</option>
                                <option value="C">Casado</option>
                                <option value="D">Divorciado</option>
                                <option value="V">Viúvo</option>
                            </select>
                        </div>
                    </div>
                    <!-- CPF -->
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label>CPF</label>
                            <input name="editar-txbCpf" id="editar-txbCpf" type="text" class="form-control"
                                placeholder="Ex: 999.999.999-99" data-mask="000.000.000-00">
                        </div>
                    </div>
                    <!--CPF, Data de Nascimento e Telefone -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>Data de Nascimento</label>
                            <input name="editar-nascimento" id="editar-nascimento" type="date" class="form-control"
                                placeholder="Ex: 10/10/2020">
                        </div>
                        <div class="form-group col-md-7">
                            <label>Telefone</label>
                            <input name="editar-telefone" id="editar-telefone" type="text" class="form-control"
                                placeholder="Ex: (11) 99999-9999" data-mask="(00) 00000-0000">
                        </div>
                    </div>


                    <!-- Endereço -->
                    <div class="containe-fluid">
                        <div class="row">
                            <div class="col-md-4">
                                <br>
                                <h1 class="title">Endereço</h1>
                            </div>
                        </div>
                    </div>
                    <hr>

                    <!-- CEP -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>CEP<input name="editar-cep" id="editar-cep" type="text" class="form-control"
                                    placeholder="Ex: 08592-000" data-mask="00000-000" id="cep" value="" maxlength="9"
                                    onblur="pesquisacep(this.value);" /></label>
                        </div>
                    </div>


                    <!-- Logradouro, Número e complemento-->
                    <div class="form-row">

                        <div class="form-group col-md-6">
                            <label>Logradouro</label>
                            <input name="editar-rua" id="editar-rua" type="text" tabindex="1" class="form-control"
                                placeholder="Ex: Rua Londrina">
                        </div>
                        <div class="form-group col-md-2">
                            <label>Número</label>
                            <input name="editar-numero" id="editar-numero" tabindex="0" type="text" class="form-control"
                                placeholder="Ex: 57">
                        </div>
                        <div class="form-group col-md-4">
                            <label>Complemento</label>
                            <input name="editar-complemento" id="editar-complemento" type="text" class="form-control"
                                placeholder="Ex: bloco, apartamento">
                        </div>

                    </div>
                    <!-- Bairro, Cidade e Estado -->
                    <div class="form-row">
                        <div class="form-group col-md-5">
                            <label>Bairro</label>
                            <input name="editar-bairro" id="editar-bairro" type="text" class="form-control"
                                placeholder="Ex: Jardim Mirai">
                        </div>
                        <div class="form-group col-md-5">
                            <label>Cidade</label>
                            <input name="editar-cidade" id="editar-cidade" type="text" class="form-control"
                                placeholder="Ex: Itaquaquecetuba">
                        </div>
                        <div class="form-group col-md-2">
                            <label>Estado</label>
                            <input name="editar-uf" id="editar-uf" type="text" class="form-control"
                                placeholder="Ex: SP">
                        </div>
                    </div>

                    <input class="salvar btn btn-primary" type="submit" name="btnSalvar" value="Salvar">

                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal Senha Administrador -->

<div id="modal-senhaadm">
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="col-10">
                    <form method="POST" id="solicitarsenha">
                        <label>Senha do Administrador</label>
                        <input type="password" name="senhaadmin" id="senhaadmin" class="form-control" placeholder="********"
                            required>
                        <input class="btn btn-primary" type="submit" name="btnSalvar" value="Salvar">
    
                    </form>
                </div>
            </div>
        </div>
    </div>

<script>
    $("#modal").iziModal({
        title: 'Adicionar Colaborador',
        subtitle: 'Formulário para adicionar um novo Colaborador ao sistema',
        headerColor: '#61ba6d',
        width: 800,
        onOpened: function(){
            let formAddColaborador = $("#dadoscolaborador")
            formAddColaborador.on("submit", function(e){
                e.preventDefault()
            })
        }
    });

    $("#modal-editar").iziModal({
        title: "Editar Colaborador",
        subtitle: 'Formulário para editar um novo Colaborador ao sistema',
        headerColor: '#61ba6d',
        width: 800,        
        onOpened: function(){
            let formAddColaborador = $("#editar-dadoscolaborador")
            formAddColaborador.on("submit", function(e){
                e.preventDefault()
            })
        }
    })

    $("#modal-senhaadm").iziModal({
        onOpened: function () {
            let formSenhaAdm = $("#solicitarsenha")
            formSenhaAdm.on("submit", function (e) {
                e.preventDefault()
                //verificar se a senha do adm é vdd
                $.ajax("url do backend que verifia senha do adm", {
                    method: "POST",
                    data: formSenhaAdm.serialize(),
                    success: function () {
                        let formDados = $("#dadoscolaborador").serialize()
                        let formEditarDados = $("#editar-dadoscolaborador").serialize()

                        $.ajax("url do backend que atualiza os dados", {
                            method: "PUT",
                            data: formDados,
                            success: function () {
                                izitoast.show("Atualizado com sucesso!")
                                $("#modal-senhaadm").iziModal("close")
                            }
                        })
                        $.ajax("url do backend que insere os dados", {
                            method: "GET",
                            data: formDados,
                            success: function () {
                                izitoast.show("Dados cadastrados com sucesso!")
                                $("#modal-senhaadm").iziModal("close")
                            }
                        })

                    }
                })
            })
        }
    });
</script>

<script src="../node_modules/jquery-confirm/dist/jquery-confirm.min.js"></script>
<script src="../node_modules/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
<script src="../candidato/js/cep.js"></script>